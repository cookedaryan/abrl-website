<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Group Activities Gallery</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles/group-activities.css">
  <link rel="stylesheet" href="styles/header.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header class="header">
                <div class="left-section">
                    <img src="assets/iit-delhi-logo.png" class="iit-logo">
                    <a href="index.html" class="href" style="text-decoration: none; color: black;">
                      <h2 class="iit-title" style="font-family: Oswald,Arial;">ABRL@IITD</h2>
                    </a>
                    <a href="index.html" class="head nav-home" title="Home" style="color: black;">
                      <i class="fas fa-home"></i>
                    </a>
                </div>
                <div class="right-section">
                    <a href="team.html" class="head nav-group"><p>THE GROUP</p></a>
                    <a href="research.html" class="head nav-research"><p>RESEARCH</p></a>
                    <a href="publications.html" class="head nav-publications"><p>PUBLICATIONS</p></a>
                    <a href="patents.html" class="head nav-patents"><p>PATENTS</p></a>
                    <a href="projects.html" class="head nav-projects"><p>PROJECTS</p></a>
                    <a href="group-activities.html" class="head nav-activities"><p>GROUP ACTIVITIES</p></a>
                    <a href="news.html" class="head nav-news"><p>NEWS</p></a>
                    <a href="index.html#contact-us-section" class="head nav-contact"><p>CONTACT</p></a>
                    <button class="toggle"><img src="assets/icons/hamburger-menu.png" class="ham-logo"></button>
                </div>
                <div class="sub-menu"></div>
        </header>
  <section class="gallery-header">
    <h1 class="gallery-header-title">Group Activities</h1>
    <p class="gallery-header-subtitle">
      A glimpse into our vibrant group activities, teamwork, and memorable moments
    </p>
  </section>

  <section class="gallery-section">
    <div class="gallery-flex" aria-live="polite" aria-atomic="true" aria-relevant="additions"></div>
    <div id="pagination" role="navigation" aria-label="Gallery Pagination"></div>
  </section>

  <!-- Modal for zoomed image -->
  <div id="modalZoom" role="dialog" aria-modal="true" aria-labelledby="modalImgAlt" tabindex="-1">
    <div class="modal-content">
      <button id="modalCloseBtn" aria-label="Close zoomed image">&times;</button>
      <img id="modalImg" src="" alt="" />
    </div>
  </div>
  <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const galleryFlex = document.querySelector(".gallery-flex");
      const pagination = document.getElementById("pagination");

      // Image range
      const startNum = 1; // Adjust this based on your image count
      const endNum = 179; // Adjust this based on your image count
      const totalImages = endNum - startNum + 1;

      // 30 images per page
      const imagesPerPage = 30;
      const totalPages = Math.ceil(totalImages / imagesPerPage);
      let currentPage = 1;

      const modalZoom = document.getElementById("modalZoom");
      const modalImg = document.getElementById("modalImg");
      const modalCloseBtn = document.getElementById("modalCloseBtn");

      // Render a page
      function renderPage(page) {
        galleryFlex.innerHTML = "";
        const startIndex = (page - 1) * imagesPerPage;
        const endIndex = Math.min(startIndex + imagesPerPage, totalImages);

        for (let i = startIndex; i < endIndex; i++) {
          const imageNum = startNum + i;

          const div = document.createElement("div");
          div.className = "gallery-item";
          div.setAttribute("tabindex", "0");

          const img = document.createElement("img");
          img.className = "gallery-img";
          img.src = `assets/group-activities/${imageNum}.jpg`;
          img.alt = `Group Activity ${i + 1}`;
          img.loading = "lazy";
          img.setAttribute("role", "button");
          img.setAttribute("aria-label", `Open Group Activity ${i + 1} image in zoom`);

          img.onload = () => {
            img.classList.add("fade-in");
          };

          div.addEventListener("click", () => openModal(img.src, img.alt));
          div.addEventListener("keydown", (e) => {
            if (e.key === "Enter" || e.key === " ") {
              e.preventDefault();
              openModal(img.src, img.alt);
            }
          });

          div.appendChild(img);
          galleryFlex.appendChild(div);
        }
      }

      function renderPagination() {
        pagination.innerHTML = "";

        const prevBtn = document.createElement("button");
        prevBtn.textContent = "Previous";
        prevBtn.disabled = currentPage === 1;
        prevBtn.setAttribute("aria-label", "Previous page");
        prevBtn.onclick = () => {
          if (currentPage > 1) {
            currentPage--;
            updateGallery();
          }
        };
        pagination.appendChild(prevBtn);

        // Show max 7 page buttons centered on current page
        const maxButtons = 7;
        let start = Math.max(1, currentPage - Math.floor(maxButtons / 2));
        let end = Math.min(totalPages, start + maxButtons - 1);
        if (end - start < maxButtons - 1) start = Math.max(1, end - maxButtons + 1);

        for (let i = start; i <= end; i++) {
          const btn = document.createElement("button");
          btn.textContent = i;
          if (i === currentPage) {
            btn.classList.add("active");
            btn.disabled = true;
            btn.setAttribute("aria-current", "page");
          }
          btn.onclick = () => {
            currentPage = i;
            updateGallery();
          };
          pagination.appendChild(btn);
        }

        const nextBtn = document.createElement("button");
        nextBtn.textContent = "Next";
        nextBtn.disabled = currentPage === totalPages;
        nextBtn.setAttribute("aria-label", "Next page");
        nextBtn.onclick = () => {
          if (currentPage < totalPages) {
            currentPage++;
            updateGallery();
          }
        };
        pagination.appendChild(nextBtn);
      }

      function updateGallery() {
        renderPage(currentPage);
        renderPagination();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function openModal(src, alt) {
        modalImg.src = src;
        modalImg.alt = alt;
        modalZoom.classList.add("active");
        document.body.style.overflow = "hidden"; // prevent background scroll
        modalCloseBtn.focus();
      }

      function closeModal() {
        modalZoom.classList.remove("active");
        modalImg.src = "";
        modalImg.alt = "";
        document.body.style.overflow = "";
      }

      modalCloseBtn.addEventListener("click", closeModal);

      modalZoom.addEventListener("click", (e) => {
        // Close modal if clicked outside modal content
        if (e.target === modalZoom) closeModal();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && modalZoom.classList.contains("active")) {
          closeModal();
        }
      });

      // Initial render
      updateGallery();
    });
  </script>
</body>
</html>



<!--
use this in the windows powershell to rename images in the folder from 1 onwards
$i=1; Get-ChildItem -Filter *.jpg | Sort-Object Name | ForEach-Object {Rename-Item $_ ('{0}.jpg' -f $i); $i++}
-->
